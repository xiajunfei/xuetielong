<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0" />
		<title>雪铁龙</title>
		<script src="js/fontAuto.js"></script>
		<script src="js/location_chs.js"></script>
		<link rel="stylesheet" type="text/css" href="css/index.css" />
	</head>
	<body>
		<div class="top clearfix">
			<div class="left"></div>
			<div class="right"></div>
		</div>
		<div class="bg_big">
			<div class="bg_big_one clearfix">
				<span class="bg_blue"></span>
				<p class="bg_title">活动说明</p>
				<span class="bg_blue"></span>
			</div>
			<p class="bg_text">在3月10日至4月15日期间，所有在东风雪铁龙支付宝服务窗正确填写个
人信息的客户，均可参与迎春体验季活动；活动内容包括：购车订金随机
减、全系试驾送豪礼、备附件礼券送不停。</p>
		</div>
		<ul class="infor">
			<li class="li_01">
				<p>姓名</p>
				<input type="text" />
			</li>
			<li class="li_02">
				<p>联系方式</p>
				<input type="text" />
			</li>
			<li class="li_03">
				<p>选择网点</p>
				<span class="spanOne">请选择省份</span>
				<span class="spanTwo">请选择城市</span>
				<select class="select_second"></select>
				<select class="select_third"></select>
			</li>
			<li class="li_04" style="border: 0 none;">
				<span class="spanThree">请选择城市</span>
				<select></select>
			</li>
		</ul>
		<div class="map">
			<img src="img/map.jpg" />
		</div>
		<div class="input_submit">
			<a href="##">确认提交</a>
		</div>
		<script src="js/zepto.min.js"></script>
		<script src="js/zepto-touch.js"></script>
		<script>
			var selectNode=document.getElementsByTagName('select');
			function optionCountry(json,obj)
			{
				var flag=document.createDocumentFragment();
				for(var i in json)
				{
					var optionNode=document.createElement('option');
					optionNode.value=i;
					optionNode.innerHTML=optionNode.value;
					flag.appendChild(optionNode);
				}
				obj.appendChild(flag);
			}
			optionCountry(dataCountry["province"],selectNode[0]);/*省份*/
			
			function optionCity(json,obj)
			{
				var flag=document.createDocumentFragment();
				for(var i in json)
				{
					var optionNode=document.createElement('option');
					optionNode.value=json[i];
					optionNode.innerHTML=json[i];
					flag.appendChild(optionNode);
				}
				obj.appendChild(flag);
			}
			
			selectNode[0].onchange=function()
			{
				selectNode[1].innerHTML="<option value=''>请选择城市</option>";
				selectNode[2].innerHTML="<option value=''>请选择网点</option>";
				
				var cityVal=this.value;
				$('.spanOne').text(cityVal);
				var cityJson=dataCountry['province'][cityVal];
				optionCity(cityJson,selectNode[1]);
				selectNode[1].style.display="";
				selectNode[1].disabled="";
				selectNode[2].disabled="disabled";
			}/*城市*/
			selectNode[1].onchange=function()
			{
				selectNode[2].innerHTML="<option value=''>请选择网点</option>";
				var districtVal=this.value;
				$('.spanTwo').text(districtVal);
				var districtJson=dataCountry['company'][districtVal];
				
				optionCity(districtJson,selectNode[2]);
				selectNode[2].disabled=""
			}
			console.log(dataCountry);
			selectNode[2].onchange=function(){
				var districtVal=this.value;
				$('.spanThree').text(districtVal);
			};
			
			var nodesObj={
				inforNode:$('.infor')
			};
			
			$('.input_submit a').tap(function(){
				var nameVal=$.trim(nodesObj.inforNode.find('.li_01 input').val());
				var phoneVal=$.trim(nodesObj.inforNode.find('.li_02 input').val());
				var countryVal=$.trim(nodesObj.inforNode.find('.li_03 .select_second').val());/*得到省*/
				var cityVal=$.trim(nodesObj.inforNode.find('.li_03 .select_third').val());/*得到市*/
				var companyVal=$.trim(nodesObj.inforNode.find('.li_04 select').val());/*得到公司*/
				
				var phoneValtrue=/^1([38]{1}[0-9]{1}|5([0-3]|[5-9]){1}|4[57]{1}|7[78]{1})[0-9]{8}$/;/*正则表达正确的手机号*/
				if(phoneValtrue.test(phoneVal)==false)/*判断手机号输入是否有误*/
				{
					alert("请输入正确的手机号");
				}
				else if(nameVal=="" ||countryVal=="" ||cityVal=="" || companyVal=="")
				{
					alert("请输入相关信息");
				}
				else
				{
					window.location.href="VerificationCode.html";
				}
			});
		</script>
	</body>
</html>
